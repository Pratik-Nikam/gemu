{% load custom_filters %}
{% load thumbnail %}
{# Migrated to Bootstrap 4 #}
{% if post.image %}
<img class="img-fluid" src="{{ post.image|thumbnail_url:'post'|default:'\media/posts/default.png' }}" alt="{{ post.text }}">
{% elif post.video %}
<div class="embed-responsive embed-responsive-16by9">
    {{ post.video|youtube_embed_url|safe }}
</div>
{% endif %}
<div class="media post pl-3 pt-3 pr-3 pb-2 mb-3 bg-dark">
    <img class="d-flex rounded pr-2" src="{{ post.user.userprofile.avatar|thumbnail_url:'avatar_thumb'|default:'\media/avatar/default.png' }}" alt="{{ post.user.get_full_name }} (@{{ post.user.username }})">
    <div class="media-body">
        <h6 class="m-0 mb-1">
            <a href="{% url 'userprofile' post.user.username %}">{{ post.user.get_full_name }}</a>
            {% if post.user.is_staff is True %}
            <i class="fa fa-check-circle fa-fw" aria-hidden="true"></i>
            {% endif %} 
            <small>@{{ post.user.username }}</small> - 
            <small>{{ post.date_created }}</small>
            {% if user == post.user %}
            <a class="float-right" href="{% url 'post_delete' post.id %}"><i class="fa fa-times fa-fw" aria-hidden="true"></i></a>
            {% endif %}
        </h6>
        <p class="mb-2 text-justify">{{ post.text }}</p>
        <ul class="m-0 float-right post-menu">
            <li><a href="{% url 'post_comment' post.id %}"><i class="fa fa-comment fa-fw" aria-hidden="true"></i> Comment</a></li>
            <li><a href="#"><i class="fa fa-retweet fa-fw" aria-hidden="true"></i> Share</a></li>
            {% if user == post.user %}
            <li><a href="#"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i> Edit</a></li>
            {% endif %}
            <li><a href="{% url 'post_detail' post.id %}"><i class="fa fa-window-restore fa-fw" aria-hidden="true"></i> Detail</a></li>
        </ul>
    </div>
</div>